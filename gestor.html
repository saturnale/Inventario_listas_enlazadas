<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Inventario de Productos</title>
</head>
<body>
    <h1>Inventario de Productos</h1>
    
    <div>
        <label>Código:</label>
        <input type="number" id="codigo" placeholder="Código del producto"><br><br>
        
        <label>Nombre:</label>
        <input type="text" id="nombre" placeholder="Nombre del producto"><br><br>
        
        <label>Cantidad:</label>
        <input type="number" id="cantidad" placeholder="Cantidad"><br><br>
        
        <label>Costo:</label>
        <input type="number" id="costo" placeholder="Costo unitario"><br><br>
        
        <label>Posición:</label>
        <input type="number" id="posicion" placeholder="Posición para insertar"><br><br>
    </div>
    
    <div>
        <button onclick="agregarProducto()">Agregar</button>
        <button onclick="cancelar()">Cancelar</button>
        <button onclick="eliminarProducto()">Eliminar</button>
        <button onclick="buscarProducto()">Buscar</button>
        <button onclick="listar()">Listar</button>
        <button onclick="listarInverso()">Listar Inverso</button>
        <button onclick="extraerPrimero()">Extraer Primero</button>
        <button onclick="insertarEnPosicion()">Insertar en Posición</button>
        <button onclick="agregarAlInicio()">Agregar al Inicio</button>
    </div>
    
    <div id="output">Operaciones se mostrarán aquí...</div>

    <script src="producto.js"></script>
    <script src="inventario.js"></script>
    <script>
        let inventario = new InventarioOrdenado();

        function agregarProducto() {
            let codigo = parseInt(document.getElementById('codigo').value);
            let nombre = document.getElementById('nombre').value;
            let cantidad = parseInt(document.getElementById('cantidad').value);
            let costo = parseFloat(document.getElementById('costo').value);

            if (!codigo || !nombre || isNaN(cantidad) || isNaN(costo)) {
                mostrarOutput("Error: Complete todos los campos correctamente.");
                return;
            }

            let nuevo = new Producto(codigo, nombre, cantidad, costo);
            if (inventario.agregar(nuevo)) {
                mostrarOutput("Producto agregado exitosamente.<br><br>" + inventario.infoTexto());
                limpiarCampos();
            } else {
                mostrarOutput("Error: El código ya existe.");
            }
        }

        function cancelar() {
            limpiarCampos();
            mostrarOutput("Campos limpiados.");
        }

        function buscarProducto() {
            let codigo = parseInt(document.getElementById('codigo').value);
            if (!codigo) {
                mostrarOutput("Error: Ingrese un código.");
                return;
            }
            let res = inventario.buscar(codigo);
            if (res) {
                mostrarOutput("Producto encontrado:<br>" + res.infoHtml());
            } else {
                mostrarOutput("Producto no encontrado.");
            }
        }

        function eliminarProducto() {
            let codigo = parseInt(document.getElementById('codigo').value);
            if (!codigo) {
                mostrarOutput("Error: Ingrese un código.");
                return;
            }
            let eliminado = inventario.eliminar(codigo);
            if (eliminado) {
                mostrarOutput("Producto eliminado:<br>" + eliminado.infoHtml() + "<br><br>Inventario actual:<br>" + inventario.infoTexto());
            } else {
                mostrarOutput("Producto no encontrado.");
            }
        }

        function extraerPrimero() {
            let extraido = inventario.extraerPrimero();
            if (extraido) {
                mostrarOutput("Primer producto extraído:<br>" + extraido.infoHtml() + "<br><br>Inventario actual:<br>" + inventario.infoTexto());
            } else {
                mostrarOutput("No hay productos para extraer.");
            }
        }

        function listar() {
            mostrarOutput(inventario.listar());
        }

        function listarInverso() {
            mostrarOutput(inventario.listarInverso());
        }

        function insertarEnPosicion() {
            let codigo = parseInt(document.getElementById('codigo').value);
            let nombre = document.getElementById('nombre').value;
            let cantidad = parseInt(document.getElementById('cantidad').value);
            let costo = parseFloat(document.getElementById('costo').value);
            let posicion = parseInt(document.getElementById('posicion').value);

            if (!codigo || !nombre || isNaN(cantidad) || isNaN(costo) || !posicion) {
                mostrarOutput("Error: Complete todos los campos correctamente.");
                return;
            }

            let nuevo = new Producto(codigo, nombre, cantidad, costo);
            if (inventario.insertarEnPosicion(nuevo, posicion)) {
                mostrarOutput("Producto insertado.<br><br>" + inventario.infoTexto());
                limpiarCampos();
            } else {
                mostrarOutput("Error al insertar.");
            }
        }

        function agregarAlInicio() {
            let codigo = parseInt(document.getElementById('codigo').value);
            let nombre = document.getElementById('nombre').value;
            let cantidad = parseInt(document.getElementById('cantidad').value);
            let costo = parseFloat(document.getElementById('costo').value);

            if (!codigo || !nombre || isNaN(cantidad) || isNaN(costo)) {
                mostrarOutput("Error: Complete todos los campos correctamente.");
                return;
            }

            let nuevo = new Producto(codigo, nombre, cantidad, costo);
            inventario.agregarAlInicio(nuevo);
            mostrarOutput("Producto agregado al inicio.<br><br>" + inventario.infoTexto());
            limpiarCampos();
        }

        function mostrarOutput(mensaje) {
            document.getElementById('output').innerHTML = mensaje;
        }

        function limpiarCampos() {
            document.getElementById('codigo').value = '';
            document.getElementById('nombre').value = '';
            document.getElementById('cantidad').value = '';
            document.getElementById('costo').value = '';
            document.getElementById('posicion').value = '';
        }
    </script>
</body>
</html>
